<div class="container">
  <div class="page-header">
    <button mat-icon-button (click)="volver()" class="back-button">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <div class="header-content">
      <h1 class="page-title">
        <mat-icon>{{isEditing ? 'edit' : 'person_add'}}</mat-icon>
        {{isEditing ? 'Editar Usuario' : 'Crear Usuario'}}
      </h1>
      <p class="page-subtitle">{{isEditing ? 'Modifica la información del usuario' : 'Completa los datos del nuevo usuario'}}</p>
    </div>
  </div>

  <div class="form-section">
    <div class="form-card">
      <form [formGroup]="usuarioForm" (ngSubmit)="onSubmit()">
        <div class="form-grid">

          <div class="form-field full-width">
            <mat-form-field appearance="outline">
              <mat-label>Nombres</mat-label>
              <input matInput formControlName="nombres" required>
              <mat-icon matSuffix>person</mat-icon>
              <mat-error *ngIf="usuarioForm.get('nombres')?.hasError('required')">
                Requerido
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-field">
            <mat-form-field appearance="outline">
              <mat-label>Apellido Paterno</mat-label>
              <input matInput formControlName="apellidoPaterno">
            </mat-form-field>
          </div>

          <div class="form-field">
            <mat-form-field appearance="outline">
              <mat-label>Apellido Materno</mat-label>
              <input matInput formControlName="apellidoMaterno">
            </mat-form-field>
          </div>

          <div class="form-field full-width">
            <mat-form-field appearance="outline">
              <mat-label>Email</mat-label>
              <input matInput type="email" formControlName="email" required>
              <mat-icon matSuffix>email</mat-icon>
              <mat-error *ngIf="usuarioForm.get('email')?.hasError('email')">
                Email inválido
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-field">
            <mat-form-field appearance="outline">
              <mat-label>Tipo Documento</mat-label>
              <mat-select formControlName="tipoDocumento" required>
                <mat-option value="DNI">DNI</mat-option>
                <mat-option value="CE">Carnet Extranjería</mat-option>
                <mat-option value="PASAPORTE">Pasaporte</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="form-field">
            <mat-form-field appearance="outline">
              <mat-label>Número Documento</mat-label>
              <input matInput formControlName="numeroDocumento" required>
              <mat-icon matSuffix>badge</mat-icon>
              <mat-error *ngIf="usuarioForm.get('numeroDocumento')?.hasError('required')">
                Requerido
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-field">
            <mat-form-field appearance="outline">
              <mat-label>Celular</mat-label>
              <input matInput formControlName="numeroCelular" required>
              <mat-icon matSuffix>phone</mat-icon>
              <mat-error *ngIf="usuarioForm.get('numeroCelular')?.hasError('required')">
                Requerido
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-field">
            <mat-form-field appearance="outline">
              <mat-label>Fecha Nacimiento</mat-label>
              <input matInput [matDatepicker]="pickerNac" formControlName="fechaNacimiento" required>
              <mat-datepicker-toggle matSuffix [for]="pickerNac"></mat-datepicker-toggle>
              <mat-datepicker #pickerNac></mat-datepicker>
              <mat-error *ngIf="usuarioForm.get('fechaNacimiento')?.hasError('required')">
                Requerido
              </mat-error>
            </mat-form-field>
          </div>

          <div class="form-field full-width">
            <mat-form-field appearance="outline">
              <mat-label>Empleo</mat-label>
              <mat-select formControlName="empleo" required>
                <mat-option *ngFor="let empleo of empleos" [value]="empleo.idEmpleo">
                  {{empleo.nombreEmpleo}}
                </mat-option>
              </mat-select>
              <mat-icon matSuffix>work</mat-icon>
              <mat-error *ngIf="usuarioForm.get('empleo')?.hasError('required')">
                Requerido
              </mat-error>
            </mat-form-field>
          </div>

        </div>

        <div class="form-actions">
          <button mat-button type="button" (click)="volver()" class="cancel-button">
            <mat-icon>close</mat-icon>
            Cancelar
          </button>
          <button mat-raised-button color="primary" type="submit"
                  [disabled]="!usuarioForm.valid || loading" class="submit-button">
            <mat-icon>{{loading ? 'hourglass_empty' : (isEditing ? 'save' : 'add')}}</mat-icon>
            {{loading ? 'Guardando...' : (isEditing ? 'Actualizar' : 'Crear')}}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
